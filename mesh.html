<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="canonical" href="https://archiebattley.com/kingsley" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="favicon.ico" type="image/x-icon"/>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
  <title>Kingsley Cars - Configurator</title>

  <!-- Google Model Viewer -->
  <script async src="https://ga.jspm.io/npm:es-module-shims@1.7.1/dist/es-module-shims.js"></script>
  <script type="importmap">
    {
      "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@^0.160.0/build/three.module.min.js"
    }
    }
  </script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer/dist/model-viewer-module.min.js"></script>

<script type="module" src="https://cdn.jsdelivr.net/npm/@google/model-viewer-effects/dist/model-viewer-effects.min.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <!-- Font Awesome Core  CSS -->
  <script src="https://kit.fontawesome.com/b5231a70fd.js" crossorigin="anonymous"></script>

  <!-- Custom styles for this template -->
  <link href="kingsley/css/kingsley.css" rel="stylesheet">
  <link href="kingsley/css/coloris.css" rel="stylesheet">

  

  <!-- Custom Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">

</head>
    
<body class="kingsleybackground noselect" style="height: 100%;
    overflow: hidden;">
      
      
      <model-viewer id="manifold" camera-controls touch-action="pan-y" src="https://archiebattley.com/kingsley/models/WheelsTest2.glb" ar alt="A 3D model of a Wheel2 and Wheel1">
        <div class="controls">
          <div>Mesh Variants:
            <button id="wheel1Button">Wheel1</button>
            <button id="wheel2Button">Wheel2</button>
          </div>
        </div>
      
        <script type="module">
          const mvTextures = document.querySelector("model-viewer#manifold");
          const wheel1Button = document.querySelector("#wheel1Button");
          const wheel2Button = document.querySelector("#wheel2Button");
      
          mvTextures.addEventListener("model-visibility", initializeMaterialManipulation);
      
          function initializeMaterialManipulation() {
            function updateMaterial(material, alpha, isOpaque) {
              material.setAlphaMode(isOpaque ? "OPAQUE" : "MASK"); // Use MASK alpha mode for alpha clipping
              const pbr = material.pbrMetallicRoughness;
              const baseColor = pbr.baseColorFactor;
              baseColor[3] = alpha; // Set alpha directly without adjusting for opaque
              pbr.setBaseColorFactor(baseColor);
              material.alphaCutoff = 0.5; // Set the alpha cutoff threshold (adjust as needed)
            }
      
            wheel1Button.addEventListener("click", () => {
              const Wheel1 = mvTextures.model.getMaterialByName("Wheel1");
              const Wheel2 = mvTextures.model.getMaterialByName("Wheel2");
              // Update materials instantly without animations
              updateMaterial(Wheel1, 1, true);
              updateMaterial(Wheel2, 0, false);
            });
      
            wheel2Button.addEventListener("click", () => {
              const Wheel1 = mvTextures.model.getMaterialByName("Wheel1");
              const Wheel2 = mvTextures.model.getMaterialByName("Wheel2");
              // Update materials instantly without animations
              updateMaterial(Wheel1, 0, false);
              updateMaterial(Wheel2, 1, true);
            });
          }
        </script>
      </model-viewer>

          <!--<script type="module">
            const mvTextures = document.querySelector("model-viewer#manifold");
            const textures = document.querySelector("#textures");
          
            mvTextures.addEventListener("load", () => {
              function updateAlphaValue(texture, alpha) {
                const pbr = texture.pbrMetallicRoughness;
                const baseColor = pbr.baseColorFactor;
                baseColor[3] = alpha;
                pbr.setBaseColorFactor(baseColor);
              }
          
              textures.addEventListener("input", (event) => {
                const selectedValue = event.target.value;
                const Wheel1 = mvTextures.model.getMaterialByName("Wheel1");
                Wheel1.setAlphaMode("BLEND");
                const Wheel2 = mvTextures.model.getMaterialByName("Wheel2");
          
                const animationDuration = 1000; // 1 second
                const startTimestamp = performance.now();
                function animate(currentTimestamp) {
                  const elapsed = currentTimestamp - startTimestamp;
          
                  const delta = elapsed / animationDuration;
                  const alpha = selectedValue === "Wheel1" ? 1 - delta : delta;
                  updateAlphaValue(Wheel2, alpha);
                  updateAlphaValue(Wheel1, 1 - alpha);
          
                  if (elapsed < animationDuration) {
                    requestAnimationFrame(animate);
                  }
                }
          
                requestAnimationFrame(animate);
              });
            });
          </script>-->
                  </div></model-viewer>

  <nav class="navbar navbar-expand-lg fixed-bottom">
    <div class="container pb-3">
      
      <a class="navbar-toggler text-shadowed" type="" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fa fa-angle-up"></i>
      </a>
      <div class="collapse navbar-collapse" id="navbarResponsive">
     
        <div class="d-none d-lg-block text-center p-2 text-shadowed " inert><h1>KINGSLEY KR SERIES</h1>
          <p class="text-small text-shadowed">(Range Rover Classic 2 Door)</p>
        </div>

        <ul class="navbar-nav ml-auto">

          <li class="nav-item annotation shadow-lg">
           <p class="font-weight-bold text-dark text-center p-2 m-0" inert>Body Colour</p>
            <div class="p-0 controls" id="color-controls">

              <div class="row text-center m-0">
                <div class="col p-xl-1 p-lg-1 p-md-1 p-sm-1 p-0">
                  <button data-color="#005b6d" class="btn btn-squared tuscanblue">Tuscan<br> Blue</button>
                </div>
                <div class="col p-xl-1 p-lg-1 p-md-1 p-sm-1 p-0">
                  <button data-color="#8A210C" class="btn btn-squared masaired">Masai<br> Red</button>
                </div>
                <div class="col p-xl-1 p-lg-1 p-md-1 p-sm-1 p-0">
                  <button data-color="#4B6413" class="btn btn-squared warwickgreen">Warwick<br> Green</button>
                </div>
                <div class="col p-xl-1 p-lg-1 p-md-1 p-sm-1 p-0">
                  <button data-color="#3E4428" class="btn btn-squared lincolngreen">Lincoln<br> Green</button>
                </div>
                <div class="col p-xl-1 p-lg-1 p-md-1 p-sm-1 p-0">
                  <button data-color="#dddbbf" class="btn btn-squared arcticwhite">Arctic<br> White</button>
                </div>
                <div class="col p-xl-1 p-lg-1 p-md-1 p-sm-1 p-0">
                  <button data-color="#D17E27" class="btn btn-squared sandglow">Sand-<br> glow</button>
                </div>
                <div class="col p-xl-1 p-lg-1 p-md-1 p-sm-1 p-0">
                  <button data-color="#442719" class="btn btn-squared russetbrown">Russet<br> Brown</button>
                </div>
                <div class="col p-xl-1 p-lg-1 p-md-1 p-sm-1 p-0">
                  <button data-color="#a1987e" class="btn btn-squared saharadust">Sahara<br> Dust</button>
                </div>
              </div>
    
            </div>
          </li>
          
        </ul>
      
      </div>

    </div>
  </nav>
  
     

    

<!-- Configurator Dependencies -->  
<script src="kingsley/js/configuratorscript.js"></script>
<script src="kingsley/js/coloris.js"></script>

  <!-- Bootstrap core JavaScript -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

</body>

</html>
